(03-31) 17:00:11 INFO     [aggregator.py:21] Job args Namespace(adam_epsilon=1e-08, backbone='./resnet50.pth', backend='gloo', base_port=42062, batch_size=32, bidirectional=True, blacklist_max_len=0.3, blacklist_rounds=-1, block_size=64, cfg_file='./utils/rcnn/cfgs/res101.yml', clf_block_size=32, clip_bound=0.9, clock_factor=1.1624548736462095, conf_path='~/dataset/', cuda_device=None, cut_off_util=0.05, data_cache='', data_dir='/users/Yinwei/FedScale/dataset/data/', data_map_file=None, data_set='cifar10', decay_epoch=10, decay_factor=0.98, device_avail_file=None, device_conf_file='/tmp/client.cfg', dump_epoch=10000000000.0, embedding_file='glove.840B.300d.txt', epochs=200, epsilon=0.9, eval_interval=5, executor_configs='10.0.0.1:[2]', exploration_alpha=0.3, exploration_decay=0.98, exploration_factor=0.9, exploration_min=0.3, filter_less=0, filter_more=1000000000000000.0, finetune=False, gamma=0.9, gradient_policy=None, hidden_layers=7, hidden_size=256, input_dim=0, job_name='cifar', labels_path='labels.json', learning_rate=0.001, line_by_line=False, local_steps=20, log_path='/users/Yinwei/FedScale/fedscale/core/evals', loss_decay=0.2, malicious_factor=1000000000000000.0, manager_port=3180, memory_capacity=2000, min_learning_rate=5e-05, mlm=False, mlm_probability=0.15, model='shufflenet_v2_x2_0', model_size=65536, n_actions=2, n_states=4, noise_dir=None, noise_factor=0.1, noise_max=0.5, noise_min=0.0, noise_prob=0.4, num_class=10, num_classes=35, num_executors=2, num_loaders=2, output_dim=0, overcommitment=1.3, overwrite_cache=False, pacer_delta=5, pacer_step=20, proxy_mu=0.1, ps_ip='10.0.0.1', ps_port='35259', rnn_type='lstm', round_penalty=2.0, round_threshold=30, sample_mode='random', sample_rate=16000, sample_seed=233, sample_window=5.0, spec_augment=False, speed_volume_perturb=False, target_replace_iter=15, task='cv', test_bsz=32, test_manifest='data/test_manifest.csv', test_output_dir='./logs/server', test_ratio=1.0, test_size_file='', this_rank=0, time_stamp='0331_170010', total_worker=4, train_manifest='data/train_manifest.csv', train_size_file='', train_uniform=False, upload_epoch=20, use_cuda=False, vocab_tag_size=500, vocab_token_size=10000, weight_decay=0, window='hamming', window_size=0.02, window_stride=0.01, yogi_beta=0.9, yogi_beta2=0.99, yogi_eta=0.003, yogi_tau=1e-08)
(03-31) 17:00:11 INFO     [aggregator.py:109] Initiating control plane communication ...
(03-31) 17:00:11 INFO     [fllibs.py:83] Initializing the model ...
(03-31) 17:00:12 INFO     [aggregator.py:454] Start monitoring events ...
(03-31) 17:00:16 INFO     [executor.py:50] (EXECUTOR:1) is setting up environ ...
(03-31) 17:00:16 INFO     [fllibs.py:83] Initializing the model ...
Downloading https://www.cs.toronto.edu/~kriz/cifar-10-python.tar.gz to /users/Yinwei/FedScale/dataset/data/cifar-10-python.tar.gz
  0%|          | 0/170498071 [00:00<?, ?it/s]  1%|          | 1705984/170498071 [00:00<00:09, 17059652.90it/s]  6%|▋         | 11061248/170498071 [00:00<00:02, 62050834.05it/s] 12%|█▏        | 19758080/170498071 [00:00<00:02, 73428158.25it/s] 17%|█▋        | 28918784/170498071 [00:00<00:01, 80603836.74it/s] 22%|██▏       | 38306816/170498071 [00:00<00:01, 85346588.49it/s] 28%|██▊       | 47465472/170498071 [00:00<00:01, 87448524.36it/s] 34%|███▍      | 57812992/170498071 [00:00<00:01, 92683703.18it/s] 39%|███▉      | 67082240/170498071 [00:00<00:01, 88011075.69it/s] 45%|████▌     | 77012992/170498071 [00:00<00:01, 91417065.50it/s] 51%|█████     | 86199296/170498071 [00:01<00:00, 89991006.45it/s] 56%|█████▌    | 95241216/170498071 [00:01<00:00, 90043887.65it/s] 62%|██████▏   | 105488384/170498071 [00:01<00:00, 93744980.77it/s] 67%|██████▋   | 114886656/170498071 [00:01<00:00, 91359821.67it/s] 73%|███████▎  | 124847104/170498071 [00:01<00:00, 93767688.50it/s] 79%|███████▊  | 134250496/170498071 [00:01<00:00, 92207456.79it/s] 85%|████████▍ | 144097280/170498071 [00:01<00:00, 94040901.19it/s] 90%|█████████ | 153521152/170498071 [00:01<00:00, 93966947.02it/s](03-31) 17:00:18 INFO     [executor.py:50] (EXECUTOR:2) is setting up environ ...
(03-31) 17:00:18 INFO     [fllibs.py:83] Initializing the model ...
 96%|█████████▌| 162931712/170498071 [00:01<00:00, 92880891.33it/s]170499072it [00:01, 88831313.30it/s]                               (03-31) 17:00:23 INFO     [executor.py:118] Data partitioner starts ...
(03-31) 17:00:23 INFO     [divide_data.py:103] Randomly partitioning data, 50000 samples...
(03-31) 17:00:23 INFO     [divide_data.py:103] Randomly partitioning data, 10000 samples...
(03-31) 17:00:23 INFO     [executor.py:126] Data partitioner completes ...
(03-31) 17:00:23 INFO     [executor.py:87] Connecting to Coordinator (10.0.0.1) for control plane communication ...
(03-31) 17:00:23 INFO     [executor.py:100] Started GRPC server at [::]:42064 for control plane
(03-31) 17:00:23 INFO     [executor.py:301] Start monitoring events ...

(03-31) 17:00:23 INFO     [executor.py:118] Data partitioner starts ...
(03-31) 17:00:23 INFO     [divide_data.py:103] Randomly partitioning data, 50000 samples...
(03-31) 17:00:23 INFO     [divide_data.py:103] Randomly partitioning data, 10000 samples...
(03-31) 17:00:23 INFO     [executor.py:126] Data partitioner completes ...
(03-31) 17:00:23 INFO     [executor.py:87] Connecting to Coordinator (10.0.0.1) for control plane communication ...
(03-31) 17:00:23 INFO     [executor.py:100] Started GRPC server at [::]:42063 for control plane
(03-31) 17:00:23 INFO     [executor.py:301] Start monitoring events ...
(03-31) 17:00:32 INFO     [channelcontext.py:38] %%%%%%%%%% Opening grpc connection to 10.0.0.1:42063 %%%%%%%%%%
(03-31) 17:00:32 INFO     [channelcontext.py:38] %%%%%%%%%% Opening grpc connection to 10.0.0.1:42064 %%%%%%%%%%
(03-31) 17:00:32 INFO     [executor.py:195] Received GRPC ReportExecutorInfo request
(03-31) 17:00:32 INFO     [aggregator.py:157] Received executor 1 information, 1/2
(03-31) 17:00:32 INFO     [executor.py:195] Received GRPC ReportExecutorInfo request
(03-31) 17:00:32 INFO     [aggregator.py:157] Received executor 2 information, 2/2
(03-31) 17:00:32 INFO     [aggregator.py:165] Loading 4 client traces ...
(03-31) 17:00:32 INFO     [aggregator.py:176] Info of all feasible clients {'total_feasible_clients': 4, 'total_num_samples': 50000}
(03-31) 17:00:32 INFO     [aggregator.py:307] Wall clock: 0 s, Epoch: 1, Planned participants: 0, Succeed participants: 0, Training loss: 0.0
(03-31) 17:00:32 INFO     [client_manager.py:169] Wall clock time: 0, 4 clients online, 0 clients offline
(03-31) 17:00:32 INFO     [aggregator.py:323] Selected participants to run: [1, 2, 3, 4]:
{1: {'computation': 1.92, 'communication': 339809.15625}, 2: {'computation': 1.92, 'communication': 339809.15625}, 3: {'computation': 1.92, 'communication': 339809.15625}, 4: {'computation': 1.92, 'communication': 339809.15625}}
(03-31) 17:00:32 INFO     [aggregator.py:472] Have received all executor information
(03-31) 17:00:32 INFO     [executor.py:148] Received GRPC UpdateModel request
(03-31) 17:00:32 INFO     [executor.py:148] Received GRPC UpdateModel request
(03-31) 17:00:32 INFO     [executor.py:166] Received GRPC Train request
(03-31) 17:00:32 INFO     [executor.py:166] Received GRPC Train request
(03-31) 17:00:32 INFO     [client.py:17] Start to train (CLIENT: 1) ...
(03-31) 17:00:32 INFO     [client.py:17] Start to train (CLIENT: 2) ...
Extracting /users/Yinwei/FedScale/dataset/data/cifar-10-python.tar.gz to /users/Yinwei/FedScale/dataset/data/
Files already downloaded and verified
Using downloaded and verified file: /users/Yinwei/FedScale/dataset/data/cifar-10-python.tar.gz
Extracting /users/Yinwei/FedScale/dataset/data/cifar-10-python.tar.gz to /users/Yinwei/FedScale/dataset/data/
Files already downloaded and verified
(03-31) 17:00:36 INFO     [client.py:188] Training of (CLIENT: 1) completes, {'clientId': 1, 'moving_loss': 2.3435223116529205, 'trained_size': 640, 'success': True, 'utility': 1543.2861424691755}
(03-31) 17:00:37 INFO     [executor.py:166] Received GRPC Train request
(03-31) 17:00:37 INFO     [client.py:17] Start to train (CLIENT: 3) ...
(03-31) 17:00:37 INFO     [client.py:188] Training of (CLIENT: 2) completes, {'clientId': 2, 'moving_loss': 2.3529679961475067, 'trained_size': 640, 'success': True, 'utility': 1563.964089247062}
(03-31) 17:00:37 INFO     [executor.py:166] Received GRPC Train request
(03-31) 17:00:37 INFO     [client.py:17] Start to train (CLIENT: 4) ...
(03-31) 17:00:41 INFO     [client.py:188] Training of (CLIENT: 3) completes, {'clientId': 3, 'moving_loss': 2.3794970187760165, 'trained_size': 640, 'success': True, 'utility': 1522.0347292585502}
(03-31) 17:00:42 INFO     [client.py:188] Training of (CLIENT: 4) completes, {'clientId': 4, 'moving_loss': 2.343583754797155, 'trained_size': 640, 'success': True, 'utility': 1491.226964388763}
(03-31) 17:00:42 INFO     [aggregator.py:307] Wall clock: 339811 s, Epoch: 2, Planned participants: 4, Succeed participants: 4, Training loss: 2.3548927703433997
(03-31) 17:00:42 INFO     [client_manager.py:169] Wall clock time: 339811, 4 clients online, 0 clients offline
(03-31) 17:00:42 INFO     [aggregator.py:323] Selected participants to run: [1, 2, 3, 4]:
{1: {'computation': 1.92, 'communication': 339809.15625}, 2: {'computation': 1.92, 'communication': 339809.15625}, 3: {'computation': 1.92, 'communication': 339809.15625}, 4: {'computation': 1.92, 'communication': 339809.15625}}
(03-31) 17:00:43 INFO     [executor.py:148] Received GRPC UpdateModel request
(03-31) 17:00:43 INFO     [executor.py:148] Received GRPC UpdateModel request
(03-31) 17:00:43 INFO     [executor.py:166] Received GRPC Train request
(03-31) 17:00:43 INFO     [executor.py:166] Received GRPC Train request
(03-31) 17:00:43 INFO     [client.py:17] Start to train (CLIENT: 2) ...
(03-31) 17:00:43 INFO     [client.py:17] Start to train (CLIENT: 1) ...
(03-31) 17:00:46 INFO     [client.py:188] Training of (CLIENT: 1) completes, {'clientId': 1, 'moving_loss': 2.338061352636376, 'trained_size': 640, 'success': True, 'utility': 1501.2102878100811}
(03-31) 17:00:46 INFO     [executor.py:166] Received GRPC Train request
(03-31) 17:00:46 INFO     [client.py:17] Start to train (CLIENT: 3) ...
(03-31) 17:00:49 INFO     [client.py:188] Training of (CLIENT: 2) completes, {'clientId': 2, 'moving_loss': 2.3229181412691933, 'trained_size': 640, 'success': True, 'utility': 1522.9704805479541}
(03-31) 17:00:49 INFO     [executor.py:166] Received GRPC Train request
(03-31) 17:00:49 INFO     [client.py:17] Start to train (CLIENT: 4) ...
(03-31) 17:00:51 INFO     [client.py:188] Training of (CLIENT: 3) completes, {'clientId': 3, 'moving_loss': 2.324039717143881, 'trained_size': 640, 'success': True, 'utility': 1490.7148590752636}
(03-31) 17:00:54 INFO     [client.py:188] Training of (CLIENT: 4) completes, {'clientId': 4, 'moving_loss': 2.3035457320348978, 'trained_size': 640, 'success': True, 'utility': 1558.6138261658853}
(03-31) 17:00:54 INFO     [aggregator.py:307] Wall clock: 679622 s, Epoch: 3, Planned participants: 4, Succeed participants: 4, Training loss: 2.3385170030572433
(03-31) 17:00:54 INFO     [client_manager.py:169] Wall clock time: 679622, 4 clients online, 0 clients offline
(03-31) 17:00:54 INFO     [aggregator.py:323] Selected participants to run: [1, 2, 3, 4]:
{1: {'computation': 1.92, 'communication': 339809.15625}, 2: {'computation': 1.92, 'communication': 339809.15625}, 3: {'computation': 1.92, 'communication': 339809.15625}, 4: {'computation': 1.92, 'communication': 339809.15625}}
(03-31) 17:00:54 INFO     [executor.py:148] Received GRPC UpdateModel request
(03-31) 17:00:54 INFO     [executor.py:148] Received GRPC UpdateModel request
(03-31) 17:00:54 INFO     [executor.py:166] Received GRPC Train request
(03-31) 17:00:54 INFO     [executor.py:166] Received GRPC Train request
(03-31) 17:00:54 INFO     [client.py:17] Start to train (CLIENT: 2) ...
(03-31) 17:00:54 INFO     [client.py:17] Start to train (CLIENT: 1) ...
(03-31) 17:00:59 INFO     [client.py:188] Training of (CLIENT: 1) completes, {'clientId': 1, 'moving_loss': 2.321513217723022, 'trained_size': 640, 'success': True, 'utility': 1509.9072839420978}
(03-31) 17:00:59 INFO     [executor.py:166] Received GRPC Train request
(03-31) 17:00:59 INFO     [client.py:188] Training of (CLIENT: 2) completes, {'clientId': 2, 'moving_loss': 2.335286239075832, 'trained_size': 640, 'success': True, 'utility': 1621.1416569819335}
(03-31) 17:00:59 INFO     [executor.py:166] Received GRPC Train request
(03-31) 17:00:59 INFO     [client.py:17] Start to train (CLIENT: 3) ...
(03-31) 17:00:59 INFO     [client.py:17] Start to train (CLIENT: 4) ...
(03-31) 17:01:03 INFO     [client.py:188] Training of (CLIENT: 3) completes, {'clientId': 3, 'moving_loss': 2.3066301102915276, 'trained_size': 640, 'success': True, 'utility': 1474.2663210113906}
(03-31) 17:01:04 INFO     [client.py:188] Training of (CLIENT: 4) completes, {'clientId': 4, 'moving_loss': 2.3105782115176905, 'trained_size': 640, 'success': True, 'utility': 1551.2840675578532}
(03-31) 17:01:04 INFO     [aggregator.py:307] Wall clock: 1019433 s, Epoch: 4, Planned participants: 4, Succeed participants: 4, Training loss: 2.3318453169221685
(03-31) 17:01:04 INFO     [client_manager.py:169] Wall clock time: 1019433, 4 clients online, 0 clients offline
(03-31) 17:01:04 INFO     [aggregator.py:323] Selected participants to run: [1, 2, 3, 4]:
{1: {'computation': 1.92, 'communication': 339809.15625}, 2: {'computation': 1.92, 'communication': 339809.15625}, 3: {'computation': 1.92, 'communication': 339809.15625}, 4: {'computation': 1.92, 'communication': 339809.15625}}
(03-31) 17:01:04 INFO     [executor.py:148] Received GRPC UpdateModel request
(03-31) 17:01:04 INFO     [executor.py:148] Received GRPC UpdateModel request
(03-31) 17:01:04 INFO     [executor.py:166] Received GRPC Train request
(03-31) 17:01:04 INFO     [executor.py:166] Received GRPC Train request
(03-31) 17:01:04 INFO     [client.py:17] Start to train (CLIENT: 1) ...
(03-31) 17:01:04 INFO     [client.py:17] Start to train (CLIENT: 2) ...
(03-31) 17:01:09 INFO     [client.py:188] Training of (CLIENT: 2) completes, {'clientId': 2, 'moving_loss': 2.3121534691166485, 'trained_size': 640, 'success': True, 'utility': 1532.1988476786169}
(03-31) 17:01:09 INFO     [executor.py:166] Received GRPC Train request
(03-31) 17:01:09 INFO     [client.py:188] Training of (CLIENT: 1) completes, {'clientId': 1, 'moving_loss': 2.298849680709307, 'trained_size': 640, 'success': True, 'utility': 1446.050652010754}
(03-31) 17:01:09 INFO     [executor.py:166] Received GRPC Train request
(03-31) 17:01:09 INFO     [client.py:17] Start to train (CLIENT: 3) ...
(03-31) 17:01:09 INFO     [client.py:17] Start to train (CLIENT: 4) ...
(03-31) 17:01:13 INFO     [client.py:188] Training of (CLIENT: 3) completes, {'clientId': 3, 'moving_loss': 2.325809578313063, 'trained_size': 640, 'success': True, 'utility': 1538.2224903135955}
(03-31) 17:01:13 INFO     [client.py:188] Training of (CLIENT: 4) completes, {'clientId': 4, 'moving_loss': 2.316604568689983, 'trained_size': 640, 'success': True, 'utility': 1533.7979734541736}
(03-31) 17:01:14 INFO     [aggregator.py:307] Wall clock: 1359244 s, Epoch: 5, Planned participants: 4, Succeed participants: 4, Training loss: 2.327222568743439
(03-31) 17:01:14 INFO     [client_manager.py:169] Wall clock time: 1359244, 4 clients online, 0 clients offline
(03-31) 17:01:14 INFO     [aggregator.py:323] Selected participants to run: [1, 2, 3, 4]:
{1: {'computation': 1.92, 'communication': 339809.15625}, 2: {'computation': 1.92, 'communication': 339809.15625}, 3: {'computation': 1.92, 'communication': 339809.15625}, 4: {'computation': 1.92, 'communication': 339809.15625}}
(03-31) 17:01:14 INFO     [executor.py:148] Received GRPC UpdateModel request
(03-31) 17:01:14 INFO     [executor.py:148] Received GRPC UpdateModel request
(03-31) 17:01:14 INFO     [executor.py:204] Received GRPC Test request
(03-31) 17:01:14 INFO     [executor.py:204] Received GRPC Test request
(03-31) 17:01:24 INFO     [utils_model.py:368] Rank 1: Test set: Average loss: 2.2902, Top-1 Accuracy: 649.0/5000 (0.1298), Top-5 Accuracy: 0.5782
(03-31) 17:01:24 INFO     [executor.py:292] After aggregation epoch 5, CumulTime 67.3995, eval_time 9.8573, test_loss 2.2902, test_accuracy 12.98%, test_5_accuracy 57.82% 

(03-31) 17:01:24 INFO     [utils_model.py:368] Rank 2: Test set: Average loss: 2.2943, Top-1 Accuracy: 659.0/5000 (0.1318), Top-5 Accuracy: 0.5748
(03-31) 17:01:24 INFO     [executor.py:292] After aggregation epoch 5, CumulTime 65.4894, eval_time 9.9133, test_loss 2.2943, test_accuracy 13.18%, test_5_accuracy 57.48% 

(03-31) 17:01:24 INFO     [aggregator.py:391] FL Testing in epoch: 5, virtual_clock: 1359244.305, top_1: 13.08 %, top_5: 57.65 %, test loss: 2.2922, test len: 10000
(03-31) 17:01:24 INFO     [executor.py:166] Received GRPC Train request
(03-31) 17:01:24 INFO     [executor.py:166] Received GRPC Train request
(03-31) 17:01:24 INFO     [client.py:17] Start to train (CLIENT: 2) ...
(03-31) 17:01:24 INFO     [client.py:17] Start to train (CLIENT: 1) ...
(03-31) 17:01:29 INFO     [client.py:188] Training of (CLIENT: 2) completes, {'clientId': 2, 'moving_loss': 2.3420312381067228, 'trained_size': 640, 'success': True, 'utility': 1569.0054966854234}
(03-31) 17:01:29 INFO     [executor.py:166] Received GRPC Train request
(03-31) 17:01:29 INFO     [client.py:188] Training of (CLIENT: 1) completes, {'clientId': 1, 'moving_loss': 2.339917170395542, 'trained_size': 640, 'success': True, 'utility': 1509.818692706037}
(03-31) 17:01:29 INFO     [executor.py:166] Received GRPC Train request
(03-31) 17:01:29 INFO     [client.py:17] Start to train (CLIENT: 3) ...
(03-31) 17:01:29 INFO     [client.py:17] Start to train (CLIENT: 4) ...
